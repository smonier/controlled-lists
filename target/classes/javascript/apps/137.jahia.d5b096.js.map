{"version":3,"file":"137.jahia.d5b096.js","mappings":"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","sources":["webpack://controlled-lists/./src/javascript/AdminPanel/AdminPanel.module.scss?05d9","webpack://controlled-lists/./src/javascript/AdminPanel/AdminPanel.module.scss","webpack://controlled-lists/./src/javascript/AdminPanel/AdminPanel.constants.jsx","webpack://controlled-lists/./src/javascript/graphql/controlledLists.queries.js","webpack://controlled-lists/./src/javascript/AdminPanel/TermImportDialog.jsx","webpack://controlled-lists/./src/javascript/AdminPanel/flags.js","webpack://controlled-lists/./src/javascript/AdminPanel/TermEditDialog.jsx","webpack://controlled-lists/./src/javascript/AdminPanel/AdminPanel.jsx","webpack://controlled-lists/./src/javascript/AdminPanel/AdminPanel.routes.jsx","webpack://controlled-lists/./src/javascript/ControlledListsSelector/ControlledListsSelector.jsx","webpack://controlled-lists/./src/javascript/AdminPanel.register.js","webpack://controlled-lists/./src/javascript/init.js"],"sourcesContent":["var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../node_modules/sass-loader/dist/cjs.js!./AdminPanel.module.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._1PQH6q0mtbs4crV1y6q9qy{display:flex;flex-direction:column;gap:16px}._1A05Oh_PN9Msb5g83hN8nL{display:flex;gap:24px;padding:24px;background:#fff;border-radius:8px;box-shadow:0 10px 30px rgba(20,46,110,.08)}._3cPq4N1KSjwiBOX1DkH9LO{width:280px;display:flex;flex-direction:column;gap:16px}._2VoRZmBKI4EuRCbW3mff0t{display:flex;flex-direction:column;gap:8px;max-height:500px;overflow-y:auto;padding-right:4px}._3VG3297pCbJuXKNadjRvkR{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-radius:6px;border:1px solid #dfe4ef;background:#f9fbff;color:#2d3c5a;font-weight:500;cursor:pointer;transition:all .15s ease-in-out}._17nxPW6a6DUqYLMS9h14Yy{border-color:#2681ff;background:rgba(38,129,255,.1);color:#0c2c66}._3igPUo8BnUO_wc31tr_H-g{flex:1;display:flex;flex-direction:column;gap:16px}._3n6apRuumcI6wNujWpKraS{padding:20px;border-radius:8px;border:1px solid #e0e7ff;background:#fff;box-shadow:0 4px 14px rgba(21,34,50,.05)}._bFPawBurox5-NUlaWxIk{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;gap:12px}._1j-tnyn89SnwOC9kJMQ3Xp{display:flex;flex-direction:column;gap:6px;margin-bottom:14px}._38bw5B7WvGqDqaNaGaFX98{min-height:90px;padding:10px;border-radius:6px;border:1px solid #d7deef;font-size:14px;resize:vertical;font-family:inherit}.OwGuLXezbhuJW-eHPSsru{padding:12px 14px;border-radius:6px;font-weight:500}.p1DO0IJ-_-63KEQDSUYBj{background:#e5f5ed;color:#126235;border:1px solid rgba(18,98,53,.3)}._3zASdNW_fBcrOxlM7hNN1v{background:#fdeaea;color:#aa1b1b;border:1px solid rgba(170,27,27,.3)}._2_LZptxYoLLZx7nsqwkIMl{position:fixed;inset:0;background:rgba(12,23,41,.55);display:flex;align-items:center;justify-content:center;z-index:9999}._170FQmFmz_gcpGYls3WZG7{width:min(640px,90vw);background:#fff;border-radius:10px;box-shadow:0 25px 45px rgba(15,23,42,.25);display:flex;flex-direction:column;max-height:90vh}._1cyKmkaU_UXmsTbqVgYIcF{padding:20px;border-bottom:1px solid #ebf0ff;display:flex;flex-direction:column;gap:8px}._1Z2R9WLApLOduzmC6gFAQS{padding:20px;overflow-y:auto;display:flex;flex-direction:column;gap:16px}._190GCFfxfMwyVXivmvuxwo{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #ebf0ff}.JSa-BSQOumNUnYWXn2BNy{display:none}._1hnPa4jhJqcc2iIzXRmDVz{width:100%;min-height:100px;border:1px solid #d7deef;border-radius:6px;padding:6px 8px;font-family:inherit}._2PnaNvl6mE4hCP74R4kpcN{border:1px solid #e0e7ff;border-radius:8px;padding:12px;background:#f7f9ff}._3AsUwzGPjymDzjKfzDN6xe{display:flex;flex-direction:column;gap:8px;margin-top:8px}._2HmD6UTeGiDaBBPm4gFm6U{display:flex;flex-direction:column;gap:2px;padding-bottom:8px;border-bottom:1px solid #dfe4ef}._2HmD6UTeGiDaBBPm4gFm6U:last-child{border-bottom:none;padding-bottom:0}._3xPZZe8d5acBeUGmuR1kdy{white-space:normal !important;word-break:break-word !important;white-space:normal;word-break:break-word}._3aRSOcDHAJnrC5ejCGpBBn{display:flex;align-items:center;gap:8px;cursor:pointer}._3TCfDCabL9C0aF__Gj5sQw{white-space:normal;word-break:break-word;line-height:1.4}.HNLsRvwmpjTKA0j1XnTal{display:flex;flex-wrap:wrap;gap:8px}._3EJmpupIpCnJIOULXhrarZ .moonstone-TableRow{min-height:72px !important;height:auto !important}._3EJmpupIpCnJIOULXhrarZ .moonstone-tableBodyCell{vertical-align:top !important;padding-top:12px !important;padding-bottom:12px !important;line-height:1.4;overflow:visible !important}._3EJmpupIpCnJIOULXhrarZ .moonstone-tableCellContent{overflow:visible !important;white-space:normal}.aPUOvBmsU7YlNMM2UR5DX{cursor:grab}._190P4pe4hDL9tGdKHez1TQ{cursor:default}._24-NPJ0XmStYfCPwrYCBTh{opacity:.5}._2sMm5P6Je6Fc7R52FPMzIK{pointer-events:none;height:64px;background:rgba(38,129,255,.08)}._2sMm5P6Je6Fc7R52FPMzIK td{padding:12px !important;border:2px dashed #2681ff !important}._1LnAJFLdBdIVPlcdHk9Jnm{height:100%}._3u2rFNMykvPolpekpzA0oV{height:24px}.kKsfJRXh3rGu8NXEYeMJm{display:flex;gap:8px;margin-bottom:16px}._36n29SKvu2sPZp3FlTFdl6{border:1px solid #dfe4ef;background:#f7f7fb;padding:6px 12px;border-radius:6px;cursor:pointer;transition:all .15s ease-in-out;display:flex;gap:6px;align-items:center}.GnpGvbo8as636bpOXCnUJ{background:rgba(38,129,255,.12);border-color:#2681ff;color:#0c2c66;font-weight:600}._22VH06o13uJx2wqDfRkjhB{font-size:16px}._2aCI0xfJ8awvT6F20WYCjq{display:inline-flex;align-items:center;gap:6px;font-weight:600}._3ls-z6Ob5PmXxsLLpIYRDD{padding:16px;border-radius:8px}._37TjsXi7Rzd2G5rcIJppC0{display:flex;flex-direction:column;gap:16px}._1NY17Ti4RX3L7GVRMkUKnc{display:flex;align-items:center;gap:12px}._2CnN5F_Xy-LKUU8Fqew7Aj{display:flex;flex-direction:column;gap:12px}._2GeCQKpF_y3RubogwhVqKN{display:flex;flex-direction:column;gap:8px;max-height:240px;overflow-y:auto;padding-right:4px}._2GeCQKpF_y3RubogwhVqKN .moonstone-checkboxItem__description{display:block;width:100%;text-align:right !important;margin-left:auto;align-self:flex-end}.kZFxvhRy9gzUJwwM9jvmS{display:flex;flex-direction:column;gap:8px}._1KQDYBSKhiDuHajyyBC1sq{display:flex;flex-wrap:wrap;gap:8px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"layout\": \"_1PQH6q0mtbs4crV1y6q9qy\",\n\t\"container\": \"_1A05Oh_PN9Msb5g83hN8nL\",\n\t\"listPanel\": \"_3cPq4N1KSjwiBOX1DkH9LO\",\n\t\"listsContainer\": \"_2VoRZmBKI4EuRCbW3mff0t\",\n\t\"listButton\": \"_3VG3297pCbJuXKNadjRvkR\",\n\t\"listButtonActive\": \"_17nxPW6a6DUqYLMS9h14Yy\",\n\t\"contentPanel\": \"_3igPUo8BnUO_wc31tr_H-g\",\n\t\"card\": \"_3n6apRuumcI6wNujWpKraS\",\n\t\"cardHeader\": \"_bFPawBurox5-NUlaWxIk\",\n\t\"formGroup\": \"_1j-tnyn89SnwOC9kJMQ3Xp\",\n\t\"textarea\": \"_38bw5B7WvGqDqaNaGaFX98\",\n\t\"feedback\": \"OwGuLXezbhuJW-eHPSsru\",\n\t\"feedbackSuccess\": \"p1DO0IJ-_-63KEQDSUYBj\",\n\t\"feedbackError\": \"_3zASdNW_fBcrOxlM7hNN1v\",\n\t\"dialogOverlay\": \"_2_LZptxYoLLZx7nsqwkIMl\",\n\t\"dialog\": \"_170FQmFmz_gcpGYls3WZG7\",\n\t\"dialogHeader\": \"_1cyKmkaU_UXmsTbqVgYIcF\",\n\t\"dialogBody\": \"_1Z2R9WLApLOduzmC6gFAQS\",\n\t\"dialogActions\": \"_190GCFfxfMwyVXivmvuxwo\",\n\t\"hiddenInput\": \"JSa-BSQOumNUnYWXn2BNy\",\n\t\"inlineTextarea\": \"_1hnPa4jhJqcc2iIzXRmDVz\",\n\t\"previewBlock\": \"_2PnaNvl6mE4hCP74R4kpcN\",\n\t\"previewList\": \"_3AsUwzGPjymDzjKfzDN6xe\",\n\t\"previewItem\": \"_2HmD6UTeGiDaBBPm4gFm6U\",\n\t\"descriptionCell\": \"_3xPZZe8d5acBeUGmuR1kdy\",\n\t\"checkboxRow\": \"_3aRSOcDHAJnrC5ejCGpBBn\",\n\t\"descriptionContent\": \"_3TCfDCabL9C0aF__Gj5sQw\",\n\t\"termActions\": \"HNLsRvwmpjTKA0j1XnTal\",\n\t\"termsTable\": \"_3EJmpupIpCnJIOULXhrarZ\",\n\t\"termRow\": \"aPUOvBmsU7YlNMM2UR5DX\",\n\t\"termRowDragDisabled\": \"_190P4pe4hDL9tGdKHez1TQ\",\n\t\"draggingRow\": \"_24-NPJ0XmStYfCPwrYCBTh\",\n\t\"placeholderRow\": \"_2sMm5P6Je6Fc7R52FPMzIK\",\n\t\"placeholderBar\": \"_1LnAJFLdBdIVPlcdHk9Jnm\",\n\t\"dropZoneRow\": \"_3u2rFNMykvPolpekpzA0oV\",\n\t\"languageTabs\": \"kKsfJRXh3rGu8NXEYeMJm\",\n\t\"languageTab\": \"_36n29SKvu2sPZp3FlTFdl6\",\n\t\"languageTabActive\": \"GnpGvbo8as636bpOXCnUJ\",\n\t\"languageFlag\": \"_22VH06o13uJx2wqDfRkjhB\",\n\t\"languageBadge\": \"_2aCI0xfJ8awvT6F20WYCjq\",\n\t\"selectorCard\": \"_3ls-z6Ob5PmXxsLLpIYRDD\",\n\t\"selectorContainer\": \"_37TjsXi7Rzd2G5rcIJppC0\",\n\t\"selectorLoading\": \"_1NY17Ti4RX3L7GVRMkUKnc\",\n\t\"selectorTerms\": \"_2CnN5F_Xy-LKUU8Fqew7Aj\",\n\t\"selectorTermsList\": \"_2GeCQKpF_y3RubogwhVqKN\",\n\t\"selectorSelection\": \"kZFxvhRy9gzUJwwM9jvmS\",\n\t\"selectorChips\": \"_1KQDYBSKhiDuHajyyBC1sq\"\n};\nmodule.exports = exports;\n","const DEFAULT_ROUTE = '/controlled-lists';\n\nexport default {\n    DEFAULT_ROUTE,\n    ROUTE: DEFAULT_ROUTE,\n    ROUTE_DEFAULT_PATH: ''\n};\n","export const FIND_NODE_QUERY = `\n    query ControlledListsRoot($path: String!) {\n        jcr {\n            nodeByPath(path: $path) {\n                uuid\n                path\n            }\n        }\n    }\n`;\n\nexport const CONTROLLED_LISTS_QUERY = `\n    query ControlledLists($rootPath: String!, $language: String!) {\n        jcr {\n            nodeByPath(path: $rootPath) {\n                uuid\n                path\n                children(typesFilter: {types: [\"cl:controlledList\"]}) {\n                    nodes {\n                        uuid\n                        path\n                        name\n                        title: property(name: \"jcr:title\", language: $language) {\n                            value\n                        }\n                        description: property(name: \"cl:description\", language: $language) {\n                            value\n                        }\n                        children(typesFilter: {types: [\"cl:controlledTerm\"]}) {\n                            nodes {\n                                uuid\n                                path\n                                name\n                                termValue: property(name: \"cl:value\") {\n                                    value\n                                }\n                                termLabel: property(name: \"cl:label\", language: $language) {\n                                    value\n                                }\n                                termDescription: property(name: \"cl:description\", language: $language) {\n                                    value\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n`;\n\nexport const CREATE_ROOT_MUTATION = `\n    mutation CreateControlledListsRoot($parentPath: String!) {\n        jcr(workspace: EDIT) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: \"controlled-lists\"\n                primaryNodeType: \"cl:listsFolder\"\n            ) {\n                uuid\n            }\n        }\n    }\n`;\n\nexport const CREATE_LIST_MUTATION = `\n    mutation CreateControlledList($parentPath: String!, $name: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: EDIT) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: $name\n                primaryNodeType: \"cl:controlledList\"\n                properties: $properties\n            ) {\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_LIST_MUTATION = `\n    mutation UpdateControlledList($path: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: EDIT) {\n            mutateNode(pathOrId: $path) {\n                setPropertiesBatch(properties: $properties) {\n                    property {\n                        name\n                    }\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const DELETE_NODE_MUTATION = `\n    mutation DeleteControlledListNode($path: String!) {\n        jcr(workspace: EDIT) {\n            deleteNode(pathOrId: $path)\n        }\n    }\n`;\n\nexport const CREATE_TERM_MUTATION = `\n    mutation CreateControlledTerm($parentPath: String!, $name: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: EDIT) {\n            addNode(\n                parentPathOrId: $parentPath\n                name: $name\n                primaryNodeType: \"cl:controlledTerm\"\n                properties: $properties\n            ) {\n                uuid\n            }\n        }\n    }\n`;\n\nexport const UPDATE_TERM_MUTATION = `\n    mutation UpdateControlledTerm($path: String!, $properties: [InputJCRProperty]!) {\n        jcr(workspace: EDIT) {\n            mutateNode(pathOrId: $path) {\n                setPropertiesBatch(properties: $properties) {\n                    property {\n                        name\n                    }\n                }\n                uuid\n            }\n        }\n    }\n`;\n\nexport const SITE_LANGUAGES_QUERY = `\n    query ControlledListLanguages($sitePath: String!) {\n        jcr {\n            nodeByPath(path: $sitePath) {\n                site {\n                    languages {\n                        displayName\n                        language\n                        activeInEdit\n                    }\n                }\n            }\n        }\n    }\n`;\n\nexport const RENAME_NODE_MUTATION = `\n    mutation RenameControlledList($path: String!, $name: String!) {\n        jcr(workspace: EDIT) {\n            mutateNode(pathOrId: $path) {\n                rename(name: $name)\n            }\n        }\n    }\n`;\n\nexport const REORDER_TERMS_MUTATION = `\n    mutation ReorderControlledTerms($path: String!, $names: [String]!) {\n        jcr(workspace: EDIT) {\n            mutateNode(pathOrId: $path) {\n                reorderChildren(names: $names)\n            }\n        }\n    }\n`;\n\nexport const CONTROLLED_LISTS_SELECTOR_QUERY = `\n    query SelectorControlledLists($rootPath: String!, $language: String!) {\n        jcr {\n            nodeByPath(path: $rootPath) {\n                children(typesFilter: {types: [\"cl:controlledList\"]}) {\n                    nodes {\n                        uuid\n                        name\n                        title: property(name: \"jcr:title\", language: $language) {\n                            value\n                        }\n                        children(typesFilter: {types: [\"cl:controlledTerm\"]}) {\n                            nodes {\n                                uuid\n                                termValue: property(name: \"cl:value\") {\n                                    value\n                                }\n                                termLabel: property(name: \"cl:label\", language: $language) {\n                                    value\n                                }\n                                termDescription: property(name: \"cl:description\", language: $language) {\n                                    value\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n`;\n","import React, {useCallback, useEffect, useMemo, useRef, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport Papa from 'papaparse';\nimport {Button, Typography, Dropdown, Checkbox} from '@jahia/moonstone';\nimport styles from './AdminPanel.module.scss';\n\nconst normalizeEntries = data => {\n    return (data || []).map(item => ({\n        value: (item.value || '').trim(),\n        label: (item.label || item.value || '').trim(),\n        description: (item.description || '').trim()\n    })).filter(entry => entry.value && entry.label);\n};\n\nconst pickDefaultLanguage = (languages, preferred) => {\n    if (preferred && languages.some(lang => lang.code === preferred)) {\n        return preferred;\n    }\n\n    return languages[0]?.code || '';\n};\n\nexport const TermImportDialog = ({isOpen, siteLanguages, initialLanguage, onClose, onImport, t}) => {\n    const [entries, setEntries] = useState([]);\n    const [fileName, setFileName] = useState('');\n    const [error, setError] = useState(null);\n    const [parsing, setParsing] = useState(false);\n    const [selectedLanguage, setSelectedLanguage] = useState(() => pickDefaultLanguage(siteLanguages, initialLanguage));\n    const [overrideExisting, setOverrideExisting] = useState(false);\n    const fileInputRef = useRef(null);\n    const languageOptions = useMemo(\n        () => (siteLanguages || []).map(lang => ({\n            label: lang.displayName || lang.code,\n            value: lang.code\n        })),\n        [siteLanguages]\n    );\n\n    const resetState = useCallback(() => {\n        setEntries([]);\n        setFileName('');\n        setError(null);\n        setParsing(false);\n        setSelectedLanguage(pickDefaultLanguage(siteLanguages, initialLanguage));\n        setOverrideExisting(false);\n    }, [initialLanguage, siteLanguages]);\n\n    const handleClose = () => {\n        onClose();\n    };\n\n    const handleFileChange = event => {\n        const file = event.target.files[0];\n        if (!file) {\n            return;\n        }\n\n        setParsing(true);\n        setError(null);\n        setFileName(file.name);\n\n        const extension = file.name.toLowerCase().split('.').pop();\n        if (extension === 'json') {\n            const reader = new FileReader();\n            reader.onload = loadEvent => {\n                try {\n                    const jsonData = JSON.parse(loadEvent.target.result || '[]');\n                    const normalized = normalizeEntries(Array.isArray(jsonData) ? jsonData : []);\n                    if (!normalized.length) {\n                        throw new Error(t('import.errors.invalidFormat'));\n                    }\n\n                    setEntries(normalized);\n                } catch (err) {\n                    setEntries([]);\n                    setError(err.message || t('import.errors.invalidFormat'));\n                } finally {\n                    setParsing(false);\n                }\n            };\n\n            reader.onerror = () => {\n                setParsing(false);\n                setError(t('import.errors.readFailed'));\n            };\n\n            reader.readAsText(file);\n        } else {\n            Papa.parse(file, {\n                header: true,\n                skipEmptyLines: true,\n                complete: result => {\n                    if (result?.errors?.length) {\n                        setError(result.errors[0].message || t('import.errors.invalidFormat'));\n                        setEntries([]);\n                    } else {\n                        const normalized = normalizeEntries(result.data);\n                        if (normalized.length === 0) {\n                            setError(t('import.errors.invalidFormat'));\n                        } else {\n                            setEntries(normalized);\n                        }\n                    }\n\n                    setParsing(false);\n                },\n                error: err => {\n                    setEntries([]);\n                    setParsing(false);\n                    setError(err.message || t('import.errors.invalidFormat'));\n                }\n            });\n        }\n    };\n\n    const handleImport = () => {\n        if (!selectedLanguage) {\n            setError(t('import.errors.noLanguage'));\n            return;\n        }\n\n        onImport(entries, {language: selectedLanguage, overrideExisting});\n    };\n\n    useEffect(() => {\n        if (!isOpen) {\n            resetState();\n        }\n    }, [isOpen, resetState]);\n\n    useEffect(() => {\n        setSelectedLanguage(prev => {\n            if (prev && siteLanguages.some(lang => lang.code === prev)) {\n                return prev;\n            }\n\n            return pickDefaultLanguage(siteLanguages, initialLanguage);\n        });\n    }, [initialLanguage, siteLanguages]);\n\n    if (!isOpen) {\n        return null;\n    }\n\n    return ReactDOM.createPortal(\n        <div className={styles.dialogOverlay}>\n            <div className={styles.dialog}>\n                <div className={styles.dialogHeader}>\n                    <Typography variant=\"heading\">{t('import.title')}</Typography>\n                    <Typography variant=\"body\">{t('import.instructions')}</Typography>\n                </div>\n                <div className={styles.dialogBody}>\n                    <div className={styles.formGroup}>\n                        <Button\n                            size=\"big\"\n                            label={fileName || t('import.selectFile')}\n                            onClick={() => fileInputRef.current?.click()}\n                        />\n                        <input\n                            ref={fileInputRef}\n                            type=\"file\"\n                            accept=\".csv,.json\"\n                            className={styles.hiddenInput}\n                            onChange={handleFileChange}\n                        />\n                        <Typography variant=\"caption\">\n                            {t('import.supportedFormats')}\n                        </Typography>\n                    </div>\n                    {parsing && (\n                        <Typography variant=\"body\">{t('import.parsing')}</Typography>\n                    )}\n                    {error && (\n                        <div className={`${styles.feedback} ${styles.feedbackError}`}>\n                            {error}\n                        </div>\n                    )}\n                    {Boolean(entries.length) && (\n                        <div className={styles.previewBlock}>\n                            <Typography variant=\"subheading\">\n                                {t('import.preview', {count: entries.length})}\n                            </Typography>\n                            <div className={styles.previewList}>\n                                {entries.slice(0, 5).map(entry => {\n                                    const key = `${entry.value}-${entry.label}-${entry.description}`;\n                                    return (\n                                        <div key={key} className={styles.previewItem}>\n                                            <strong>{entry.value}</strong>\n                                            <span>{entry.label}</span>\n                                            {entry.description && (\n                                                <em>{entry.description}</em>\n                                            )}\n                                        </div>\n                                    );\n                                })}\n                                {entries.length > 5 && (\n                                <Typography variant=\"caption\">\n                                    {t('import.moreRows', {count: entries.length - 5})}\n                                </Typography>\n                                )}\n                            </div>\n                        </div>\n                    )}\n                    <div className={styles.formGroup}>\n                        <Typography variant=\"body\" weight=\"bold\">{t('import.language')}</Typography>\n                        <Dropdown\n                            data={languageOptions}\n                            value={selectedLanguage}\n                            placeholder={t('import.language')}\n                            onChange={(e, item) => setSelectedLanguage(item.value)}\n                        />\n                    </div>\n                    <div className={styles.formGroup}>\n                        <label className={styles.checkboxRow}>\n                            <Checkbox\n                                checked={overrideExisting}\n                                onChange={(event, value, checked) => setOverrideExisting(checked)}\n                            />\n                            <Typography variant=\"body\">{t('import.override')}</Typography>\n                        </label>\n                    </div>\n                </div>\n                <div className={styles.dialogActions}>\n                    <Button size=\"big\" label={t('actions.cancel')} onClick={handleClose}/>\n                    <Button\n                        size=\"big\"\n                        color=\"accent\"\n                        isDisabled={!entries.length || parsing}\n                        label={t('import.importButton')}\n                        onClick={handleImport}\n                    />\n                </div>\n            </div>\n        </div>,\n        document.body\n    );\n};\n\nTermImportDialog.propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    siteLanguages: PropTypes.arrayOf(PropTypes.shape({\n        code: PropTypes.string.isRequired,\n        displayName: PropTypes.string\n    })),\n    initialLanguage: PropTypes.string,\n    onClose: PropTypes.func.isRequired,\n    onImport: PropTypes.func.isRequired,\n    t: PropTypes.func.isRequired\n};\n\nTermImportDialog.defaultProps = {\n    siteLanguages: [],\n    initialLanguage: ''\n};\n","const FLAG_MAP = {\n    en: '',\n    fr: '',\n    de: '',\n    es: '',\n    it: '',\n    pt: '',\n    nl: '',\n    ru: '',\n    ja: '',\n    zh: '',\n    ar: '',\n    ko: '',\n    pl: '',\n    tr: '',\n    sv: '',\n    da: '',\n    no: '',\n    fi: '',\n    cs: '',\n    el: ''\n};\n\nexport const getFlagEmoji = langCode => FLAG_MAP[langCode] || '';\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport {Input, Button, Typography} from '@jahia/moonstone';\nimport styles from './AdminPanel.module.scss';\nimport {getFlagEmoji} from './flags';\n\nexport const TermEditDialog = ({isOpen, form, onChange, onClose, onSave, isSaving, t, languageCode, languageName}) => {\n    if (!isOpen) {\n        return null;\n    }\n\n    return ReactDOM.createPortal(\n        <div className={styles.dialogOverlay}>\n            <div className={styles.dialog}>\n                <div className={styles.dialogHeader}>\n                    <Typography variant=\"heading\">{t('edit.title')}</Typography>\n                    {languageCode && (\n                        <Typography variant=\"body\" className={styles.languageBadge}>\n                            {getFlagEmoji(languageCode)} {languageName || languageCode.toUpperCase()}\n                        </Typography>\n                    )}\n                </div>\n                <div className={styles.dialogBody}>\n                    <div className={styles.formGroup}>\n                        <Typography variant=\"body\" weight=\"bold\">{t('terms.fields.value')}</Typography>\n                        <Input value={form.value} onChange={e => onChange('value', e.target.value)}/>\n                    </div>\n                    <div className={styles.formGroup}>\n                        <Typography variant=\"body\" weight=\"bold\">{t('terms.fields.label')}</Typography>\n                        <Input value={form.label} onChange={e => onChange('label', e.target.value)}/>\n                    </div>\n                    <div className={styles.formGroup}>\n                        <Typography variant=\"body\" weight=\"bold\">{t('terms.fields.description')}</Typography>\n                        <textarea\n                            className={styles.inlineTextarea}\n                            value={form.description}\n                            onChange={e => onChange('description', e.target.value)}\n                        />\n                    </div>\n                </div>\n                <div className={styles.dialogActions}>\n                    <Button size=\"big\" label={t('actions.cancel')} onClick={onClose}/>\n                    <Button size=\"big\" color=\"accent\" isDisabled={isSaving} label={t('actions.save')} onClick={onSave}/>\n                </div>\n            </div>\n        </div>,\n        document.body\n    );\n};\n\nTermEditDialog.propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    form: PropTypes.shape({\n        value: PropTypes.string,\n        label: PropTypes.string,\n        description: PropTypes.string\n    }).isRequired,\n    onChange: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSave: PropTypes.func.isRequired,\n    isSaving: PropTypes.bool,\n    t: PropTypes.func.isRequired,\n    languageCode: PropTypes.string,\n    languageName: PropTypes.string\n};\n","import React, {useCallback, useEffect, useMemo, useState} from 'react';\nimport {\n    LayoutContent,\n    Header,\n    Paper,\n    Button,\n    Input,\n    Typography,\n    Table,\n    TableHead,\n    TableHeadCell,\n    TableRow,\n    TableBody,\n    TableBodyCell\n} from '@jahia/moonstone';\nimport axios from 'axios';\nimport {useTranslation} from 'react-i18next';\nimport {\n    CONTROLLED_LISTS_QUERY,\n    CREATE_LIST_MUTATION,\n    CREATE_ROOT_MUTATION,\n    CREATE_TERM_MUTATION,\n    DELETE_NODE_MUTATION,\n    FIND_NODE_QUERY,\n    UPDATE_LIST_MUTATION,\n    UPDATE_TERM_MUTATION,\n    SITE_LANGUAGES_QUERY,\n    RENAME_NODE_MUTATION,\n    REORDER_TERMS_MUTATION\n} from '../graphql/controlledLists.queries';\nimport styles from './AdminPanel.module.scss';\nimport {TermImportDialog} from './TermImportDialog';\nimport {TermEditDialog} from './TermEditDialog';\nimport {getFlagEmoji} from './flags';\n\nconst defaultListForm = {\n    uuid: null,\n    path: '',\n    systemName: '',\n    title: '',\n    description: ''\n};\n\nconst defaultTermForm = {\n    uuid: null,\n    path: '',\n    value: '',\n    label: '',\n    description: ''\n};\n\nconst slugify = value => value\n    .toString()\n    .normalize('NFKD')\n    .replace(/[\\u0300-\\u036f]/g, '')\n    .replace(/[^\\w\\s-]/g, '')\n    .trim()\n    .replace(/[\\s_-]+/g, '-')\n    .replace(/^-+|-+$/g, '')\n    .toLowerCase();\n\nconst ensureUniqueName = (value, existingNames, fallbackPrefix) => {\n    const base = slugify(value) || fallbackPrefix;\n    if (!existingNames.includes(base)) {\n        return base;\n    }\n\n    let suffix = 1;\n    while (existingNames.includes(`${base}-${suffix}`)) {\n        suffix += 1;\n    }\n\n    return `${base}-${suffix}`;\n};\n\nconst askConfirmation = message => {\n    // eslint-disable-next-line no-alert\n    return window.confirm(message);\n};\n\nconst reorderTermCollection = (terms, sourceIndex, targetIndex) => {\n    if (!Array.isArray(terms) || terms.length < 2) {\n        return null;\n    }\n\n    if ((sourceIndex === null || sourceIndex === undefined) || (targetIndex === null || targetIndex === undefined) ||\n        sourceIndex < 0 || sourceIndex >= terms.length) {\n        return null;\n    }\n\n    const clampedTarget = Math.max(0, Math.min(targetIndex, terms.length));\n    const nextOrder = [...terms];\n    const [moved] = nextOrder.splice(sourceIndex, 1);\n\n    if (!moved) {\n        return null;\n    }\n\n    const insertIndex = sourceIndex < clampedTarget ? clampedTarget - 1 : clampedTarget;\n    nextOrder.splice(insertIndex, 0, moved);\n\n    const unchanged = nextOrder.length === terms.length && nextOrder.every((term, idx) => term.uuid === terms[idx].uuid);\n    return unchanged ? null : nextOrder;\n};\n\nconst mapListNode = node => ({\n    uuid: node.uuid,\n    path: node.path,\n    name: node.name,\n    systemName: node.name,\n    title: node.title?.value || node.name,\n    description: node.description?.value || '',\n    terms: (node.children?.nodes || []).map(term => ({\n        uuid: term.uuid,\n        path: term.path,\n        name: term.name,\n        value: term.termValue?.value || '',\n        label: term.termLabel?.value || '',\n        description: term.termDescription?.value || ''\n    }))\n});\n\nconst normalizeLanguages = langs => {\n    if (!Array.isArray(langs)) {\n        return [];\n    }\n\n    const seen = new Set();\n    const normalized = [];\n    langs.forEach(lang => {\n        if (!lang) {\n            return;\n        }\n\n        const code = lang.code;\n        if (!code || seen.has(code)) {\n            return;\n        }\n\n        normalized.push({\n            code,\n            displayName: lang.displayName || code\n        });\n        seen.add(code);\n    });\n\n    return normalized;\n};\n\nexport const AdminPanel = () => {\n    const {\n        t,\n        i18n: {language: uiLanguage}\n    } = useTranslation('controlled-lists');\n\n    const context = window.contextJsParameters || {};\n    const siteKey = context.siteKey || context.site?.key || '';\n    const siteName = context.site?.displayName || context.site?.name || siteKey || '';\n    const [language, setLanguage] = useState(uiLanguage || 'en');\n    const graphqlEndpoint = `${context.contextPath || ''}/modules/graphql`;\n    const initialSiteLanguages = normalizeLanguages((context.siteLanguages || []).map(lang => (typeof lang === 'string' ? {code: lang, displayName: lang} : {\n        code: lang.language || lang.code,\n        displayName: lang.displayName || lang.language || lang.code\n    })).filter(lang => lang.code));\n    const [siteLanguages, setSiteLanguages] = useState(initialSiteLanguages);\n\n    const [rootPath, setRootPath] = useState('');\n    const [lists, setLists] = useState([]);\n    const [selectedListId, setSelectedListId] = useState(null);\n    const [showCreateList, setShowCreateList] = useState(false);\n    const [listForm, setListForm] = useState(defaultListForm);\n    const [termForm, setTermForm] = useState(defaultTermForm);\n    const [loading, setLoading] = useState(false);\n    const [savingList, setSavingList] = useState(false);\n    const [savingTerm, setSavingTerm] = useState(false);\n    const [feedback, setFeedback] = useState(null);\n    const [error, setError] = useState(null);\n    const [isImportDialogOpen, setImportDialogOpen] = useState(false);\n    const [importingTerms, setImportingTerms] = useState(false);\n    const [isEditDialogOpen, setEditDialogOpen] = useState(false);\n    const [editTermForm, setEditTermForm] = useState(defaultTermForm);\n    const [reorderingTerms, setReorderingTerms] = useState(false);\n    const [dragState, setDragState] = useState({sourceIndex: null, targetIndex: null});\n\n    useEffect(() => {\n        setLanguage(uiLanguage || 'en');\n    }, [uiLanguage]);\n\n    const executeQuery = useCallback(async (query, variables) => {\n        const response = await axios.post(graphqlEndpoint, {query, variables}, {\n            headers: {'Content-Type': 'application/json'},\n            withCredentials: true\n        });\n\n        if (response.data?.errors?.length) {\n            const message = response.data.errors.map(err => err.message).join('\\n');\n            throw new Error(message);\n        }\n\n        return response.data.data;\n    }, [graphqlEndpoint]);\n\n    const selectedList = useMemo(\n        () => lists.find(list => list.uuid === selectedListId) || null,\n        [lists, selectedListId]\n    );\n\n    const resetDragState = useCallback(() => {\n        setDragState({sourceIndex: null, targetIndex: null});\n    }, []);\n\n    useEffect(() => {\n        resetDragState();\n        setReorderingTerms(false);\n    }, [resetDragState, selectedListId, showCreateList]);\n\n    useEffect(() => {\n        if (rootPath) {\n            refreshLists(rootPath);\n        }\n    }, [language, refreshLists, rootPath]);\n\n    useEffect(() => {\n        if (feedback) {\n            const timer = setTimeout(() => setFeedback(null), 5000);\n            return () => clearTimeout(timer);\n        }\n    }, [feedback]);\n\n    const ensureRoot = useCallback(async () => {\n        if (!siteKey) {\n            throw new Error(t('errors.missingSite'));\n        }\n\n        const baseContentPath = `/sites/${siteKey}/contents`;\n        const targetPath = `${baseContentPath}/controlled-lists`;\n        const data = await executeQuery(FIND_NODE_QUERY, {path: targetPath});\n\n        if (!data?.jcr?.nodeByPath) {\n            await executeQuery(CREATE_ROOT_MUTATION, {parentPath: baseContentPath});\n        }\n\n        return targetPath;\n    }, [executeQuery, siteKey, t]);\n\n    const refreshLists = useCallback(async (path, nextSelection) => {\n        if (!path) {\n            return;\n        }\n\n        setLoading(true);\n        setError(null);\n        try {\n            const data = await executeQuery(CONTROLLED_LISTS_QUERY, {rootPath: path, language});\n            const mapped = (data?.jcr?.nodeByPath?.children?.nodes || []).map(mapListNode);\n            mapped.sort((a, b) => a.title.localeCompare(b.title, language, {sensitivity: 'base'}));\n            setLists(mapped);\n\n            if (nextSelection) {\n                setSelectedListId(nextSelection);\n                setShowCreateList(false);\n            } else if (!showCreateList) {\n                const stillExists = mapped.some(list => list.uuid === selectedListId);\n                if (!stillExists) {\n                    setSelectedListId(mapped[0]?.uuid || null);\n                }\n            }\n        } catch (err) {\n            setError(err);\n        } finally {\n            setLoading(false);\n        }\n    }, [executeQuery, language, selectedListId, showCreateList]);\n\n    useEffect(() => {\n        let active = true;\n\n        const bootstrap = async () => {\n            if (!siteKey) {\n                setError(new Error(t('errors.missingSite')));\n                return;\n            }\n\n            try {\n                const path = await ensureRoot();\n                if (!active) {\n                    return;\n                }\n\n                setRootPath(path);\n                await refreshLists(path);\n            } catch (err) {\n                if (active) {\n                    setError(err);\n                }\n            }\n        };\n\n        bootstrap();\n\n        return () => {\n            active = false;\n        };\n    }, [ensureRoot, refreshLists, siteKey, t]);\n\n    useEffect(() => {\n        if (!siteKey) {\n            setSiteLanguages([]);\n            return;\n        }\n\n        let mounted = true;\n        const fetchLanguages = async () => {\n            try {\n                const data = await executeQuery(SITE_LANGUAGES_QUERY, {sitePath: `/sites/${siteKey}`});\n                const langs = data?.jcr?.nodeByPath?.site?.languages?.filter(lang => lang.activeInEdit) ?? [];\n                if (mounted && langs.length) {\n                    const normalized = normalizeLanguages(langs.map(lang => ({\n                        code: lang.language,\n                        displayName: lang.displayName || lang.language\n                    })));\n                    setSiteLanguages(normalized);\n\n                    if (!normalized.find(lang => lang.code === language) && normalized[0]) {\n                        setLanguage(normalized[0].code);\n                    }\n                }\n            } catch (err) {\n                console.warn('Failed to load site languages', err);\n            }\n        };\n\n        fetchLanguages();\n        return () => {\n            mounted = false;\n        };\n    }, [executeQuery, language, siteKey]);\n\n    useEffect(() => {\n        if (showCreateList) {\n            setListForm({...defaultListForm});\n        } else if (selectedList) {\n            setListForm({\n                uuid: selectedList.uuid,\n                path: selectedList.path,\n                systemName: selectedList.systemName,\n                title: selectedList.title,\n                description: selectedList.description\n            });\n        } else {\n            setListForm({...defaultListForm});\n        }\n\n        setTermForm({...defaultTermForm});\n        setEditDialogOpen(false);\n    }, [selectedList, showCreateList, language]);\n\n    const handleListChange = (field, value) => {\n        setListForm(prev => ({...prev, [field]: value}));\n    };\n\n    const handleTermChange = (field, value) => {\n        setTermForm(prev => ({...prev, [field]: value}));\n    };\n\n    const notify = (type, key, params) => {\n        setFeedback({type, message: t(key, params)});\n    };\n\n    const handleSaveList = async event => {\n        event.preventDefault();\n        if (!rootPath) {\n            return;\n        }\n\n        const systemName = listForm.systemName.trim();\n        const title = listForm.title.trim();\n        const description = listForm.description.trim();\n\n        if (!systemName || !title) {\n            setFeedback({type: 'error', message: t('errors.requiredFields')});\n            return;\n        }\n\n        const duplicate = lists.some(\n            list => list.uuid !== listForm.uuid && list.systemName.toLowerCase() === systemName.toLowerCase()\n        );\n        if (duplicate) {\n            setFeedback({type: 'error', message: t('errors.duplicateSystemName', {name: systemName})});\n            return;\n        }\n\n        const properties = [\n            {name: 'jcr:title', value: title, language},\n            {name: 'cl:description', value: description || '', language}\n        ];\n\n        setSavingList(true);\n        try {\n            if (showCreateList) {\n                const existingNames = lists.map(list => list.name);\n                const name = ensureUniqueName(systemName, existingNames, 'controlled-list');\n                const data = await executeQuery(CREATE_LIST_MUTATION, {parentPath: rootPath, name, properties});\n                const newUuid = data?.jcr?.addNode?.uuid || null;\n                notify('success', 'feedback.listCreated');\n                setShowCreateList(false);\n                await refreshLists(rootPath, newUuid);\n            } else if (selectedList) {\n                await executeQuery(UPDATE_LIST_MUTATION, {path: selectedList.path, properties});\n\n                if (selectedList.systemName !== systemName) {\n                    await executeQuery(RENAME_NODE_MUTATION, {path: selectedList.path, name: systemName});\n                }\n\n                notify('success', 'feedback.listUpdated');\n                await refreshLists(rootPath, selectedList.uuid);\n            }\n        } catch (err) {\n            setFeedback({type: 'error', message: err.message});\n        } finally {\n            setSavingList(false);\n        }\n    };\n\n    const handleDeleteList = async list => {\n        if (!rootPath || !list) {\n            return;\n        }\n\n        if (!askConfirmation(t('lists.deleteConfirm', {title: list.title}))) {\n            return;\n        }\n\n        try {\n            await executeQuery(DELETE_NODE_MUTATION, {path: list.path});\n            notify('success', 'feedback.listDeleted');\n            await refreshLists(rootPath);\n        } catch (err) {\n            setFeedback({type: 'error', message: err.message});\n        }\n    };\n\n    const beginCreateList = () => {\n        setShowCreateList(true);\n        setSelectedListId(null);\n        setListForm({...defaultListForm});\n        setTermForm({...defaultTermForm});\n        resetDragState();\n    };\n\n    const handleLanguageChange = code => {\n        if (!code || code === language) {\n            return;\n        }\n\n        setLanguage(code);\n    };\n\n    const handleEditTerm = term => {\n        setEditDialogOpen(true);\n        setEditTermForm({\n            uuid: term.uuid,\n            path: term.path,\n            value: term.value,\n            label: term.label,\n            description: term.description || ''\n        });\n    };\n\n    const handleSaveTerm = async event => {\n        event.preventDefault();\n        if (!selectedList) {\n            return;\n        }\n\n        const value = termForm.value.trim();\n        const label = termForm.label.trim();\n        const description = termForm.description.trim();\n\n        if (!value || !label) {\n            setFeedback({type: 'error', message: t('errors.requiredFields')});\n            return;\n        }\n\n        const duplicate = selectedList.terms.some(\n            term => term.uuid !== termForm.uuid && term.value.toLowerCase() === value.toLowerCase()\n        );\n        if (duplicate) {\n            setFeedback({type: 'error', message: t('errors.duplicateTermValue', {value})});\n            return;\n        }\n\n        const properties = [\n            {name: 'cl:value', value},\n            {name: 'cl:label', value: label, language},\n            {name: 'cl:description', value: description || '', language}\n        ];\n\n        setSavingTerm(true);\n        try {\n            if (termForm.uuid) {\n                await executeQuery(UPDATE_TERM_MUTATION, {path: termForm.path, properties});\n                notify('success', 'feedback.termUpdated');\n            } else {\n                const existingNames = selectedList.terms.map(term => term.name);\n                const termName = ensureUniqueName(value, existingNames, 'controlled-term');\n                await executeQuery(CREATE_TERM_MUTATION, {\n                    parentPath: selectedList.path,\n                    name: termName,\n                    properties\n                });\n                notify('success', 'feedback.termCreated');\n            }\n\n            setTermForm({...defaultTermForm});\n            await refreshLists(rootPath, selectedList.uuid);\n        } catch (err) {\n            setFeedback({type: 'error', message: err.message});\n        } finally {\n            setSavingTerm(false);\n        }\n    };\n\n    const handleEditFieldChange = (field, value) => {\n        setEditTermForm(prev => ({...prev, [field]: value}));\n    };\n\n    const handleEditDialogSave = async () => {\n        if (!selectedList) {\n            return;\n        }\n\n        const value = editTermForm.value.trim();\n        const label = editTermForm.label.trim();\n        const description = editTermForm.description.trim();\n\n        if (!value || !label) {\n            setFeedback({type: 'error', message: t('errors.requiredFields')});\n            return;\n        }\n\n        const duplicate = selectedList.terms.some(\n            term => term.uuid !== editTermForm.uuid && term.value.toLowerCase() === value.toLowerCase()\n        );\n        if (duplicate) {\n            setFeedback({type: 'error', message: t('errors.duplicateTermValue', {value})});\n            return;\n        }\n\n        const properties = [\n            {name: 'cl:value', value},\n            {name: 'cl:label', value: label, language},\n            {name: 'cl:description', value: description || '', language}\n        ];\n\n        setSavingTerm(true);\n        try {\n            await executeQuery(UPDATE_TERM_MUTATION, {path: editTermForm.path, properties});\n            notify('success', 'feedback.termUpdated');\n            setEditDialogOpen(false);\n            await refreshLists(rootPath, selectedList.uuid);\n        } catch (err) {\n            setFeedback({type: 'error', message: err.message});\n        } finally {\n            setSavingTerm(false);\n        }\n    };\n\n    const handleDeleteTerm = async term => {\n        if (!selectedList || !term) {\n            return;\n        }\n\n        if (!askConfirmation(t('terms.deleteConfirm', {label: term.label || term.value}))) {\n            return;\n        }\n\n        try {\n            if (isEditDialogOpen && editTermForm.uuid === term.uuid) {\n                setEditDialogOpen(false);\n            }\n\n            await executeQuery(DELETE_NODE_MUTATION, {path: term.path});\n            notify('success', 'feedback.termDeleted');\n            await refreshLists(rootPath, selectedList.uuid);\n        } catch (err) {\n            setFeedback({type: 'error', message: err.message});\n        }\n    };\n\n    const handleImportEntries = async (importedEntries, options = {}) => {\n        if (!selectedList) {\n            setFeedback({type: 'error', message: t('import.errors.noList')});\n            return;\n        }\n\n        setEditDialogOpen(false);\n        setImportingTerms(true);\n        try {\n            const usedNames = new Set(selectedList.terms.map(term => term.name));\n            const existingByValue = new Map(selectedList.terms.map(term => [term.value.toLowerCase(), term]));\n            const createPayloads = [];\n            const updatePayloads = [];\n            const importLanguage = options.language || language;\n            const overrideExisting = Boolean(options.overrideExisting);\n\n            importedEntries.forEach(entry => {\n                const value = entry.value?.trim();\n                const label = entry.label?.trim();\n                if (!value || !label) {\n                    return;\n                }\n\n                const valueKey = value.toLowerCase();\n                const description = entry.description?.trim() || '';\n                const properties = [\n                    {name: 'cl:value', value},\n                    {name: 'cl:label', value: label, language: importLanguage},\n                    {name: 'cl:description', value: description, language: importLanguage}\n                ];\n                const existingTerm = existingByValue.get(valueKey);\n\n                if (existingTerm) {\n                    if (overrideExisting) {\n                        updatePayloads.push({path: existingTerm.path, properties});\n                    }\n\n                    return;\n                }\n\n                const uniqueName = ensureUniqueName(value, Array.from(usedNames), 'controlled-term');\n                usedNames.add(uniqueName);\n                existingByValue.set(valueKey, {path: null});\n                createPayloads.push({name: uniqueName, properties});\n            });\n\n            if (!createPayloads.length && !updatePayloads.length) {\n                setFeedback({type: 'error', message: t('import.errors.noValidRows')});\n                return;\n            }\n\n            const createResults = await Promise.allSettled(createPayloads.map(payload => executeQuery(CREATE_TERM_MUTATION, {\n                parentPath: selectedList.path,\n                name: payload.name,\n                properties: payload.properties\n            })));\n\n            const updateResults = await Promise.allSettled(updatePayloads.map(payload => executeQuery(UPDATE_TERM_MUTATION, {\n                path: payload.path,\n                properties: payload.properties\n            })));\n\n            const created = createResults.filter(result => result.status === 'fulfilled').length;\n            const updated = updateResults.filter(result => result.status === 'fulfilled').length;\n            const rejected = [...createResults, ...updateResults].find(result => result.status === 'rejected');\n\n            if (created + updated > 0) {\n                setImportDialogOpen(false);\n                notify('success', 'feedback.termImported', {count: created + updated});\n                await refreshLists(rootPath, selectedList.uuid);\n            }\n\n            if (rejected) {\n                throw rejected.reason;\n            }\n        } catch (err) {\n            setFeedback({type: 'error', message: err.message});\n        } finally {\n            setImportingTerms(false);\n        }\n    };\n\n    const updateTargetIndex = useCallback(index => {\n        setDragState(prev => {\n            if (prev.sourceIndex === null) {\n                return prev;\n            }\n\n            const limit = selectedList?.terms.length || 0;\n            const clamped = Math.max(0, Math.min(index, limit));\n            if (clamped === prev.targetIndex) {\n                return prev;\n            }\n\n            return {...prev, targetIndex: clamped};\n        });\n    }, [selectedList]);\n\n    const handleTermDragStart = (event, index) => {\n        if (!selectedList || selectedList.terms.length < 2 || reorderingTerms) {\n            return;\n        }\n\n        if (event.dataTransfer) {\n            event.dataTransfer.effectAllowed = 'move';\n            event.dataTransfer.setData('text/plain', selectedList.terms[index].uuid);\n        }\n\n        setDragState({sourceIndex: index, targetIndex: index});\n    };\n\n    const handleTermDragOver = (event, index) => {\n        if (dragState.sourceIndex === null) {\n            return;\n        }\n\n        event.preventDefault();\n        const rect = event.currentTarget.getBoundingClientRect();\n        const shouldPlaceAfter = event.clientY - rect.top > rect.height / 2;\n        const nextIndex = shouldPlaceAfter ? index + 1 : index;\n        updateTargetIndex(nextIndex);\n    };\n\n    const handleTermDrop = async event => {\n        if (dragState.sourceIndex === null || dragState.targetIndex === null || !selectedList) {\n            resetDragState();\n            return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        const {sourceIndex, targetIndex} = dragState;\n        const nextOrder = reorderTermCollection(selectedList.terms, sourceIndex, targetIndex);\n        resetDragState();\n\n        if (!nextOrder) {\n            return;\n        }\n\n        setReorderingTerms(true);\n        try {\n            await executeQuery(REORDER_TERMS_MUTATION, {\n                path: selectedList.path,\n                names: nextOrder.map(term => term.name)\n            });\n            notify('success', 'feedback.termReordered');\n            await refreshLists(rootPath, selectedList.uuid);\n        } catch (err) {\n            setFeedback({type: 'error', message: err.message});\n        } finally {\n            setReorderingTerms(false);\n        }\n    };\n\n    const handleTermDragEnd = () => {\n        if (!reorderingTerms) {\n            resetDragState();\n        }\n    };\n\n    const renderTermRows = () => {\n        if (!selectedList || selectedList.terms.length === 0) {\n            return (\n                <TableRow>\n                    <TableBodyCell colSpan={4}>{t('terms.empty')}</TableBodyCell>\n                </TableRow>\n            );\n        }\n\n        const allowDrag = selectedList.terms.length > 1 && !reorderingTerms;\n        const isSelfTarget = dragState.sourceIndex !== null &&\n            dragState.targetIndex !== null &&\n            (dragState.targetIndex === dragState.sourceIndex ||\n            (dragState.targetIndex === dragState.sourceIndex + 1 && dragState.targetIndex > dragState.sourceIndex));\n        const shouldShowPlaceholder = dragState.sourceIndex !== null &&\n            dragState.targetIndex !== null &&\n            !isSelfTarget;\n        const placeholderIndex = shouldShowPlaceholder ? dragState.targetIndex : null;\n\n        const renderPlaceholder = key => (\n            <TableRow key={`placeholder-${key}`} className={styles.placeholderRow}>\n                <TableBodyCell colSpan={4}>\n                    <div className={styles.placeholderBar}/>\n                </TableBodyCell>\n            </TableRow>\n        );\n\n        const rows = [];\n        selectedList.terms.forEach((term, index) => {\n            if (placeholderIndex === index) {\n                rows.push(renderPlaceholder(`before-${term.uuid}`));\n            }\n\n            const rowClasses = [styles.termRow];\n            if (dragState.sourceIndex === index) {\n                rowClasses.push(styles.draggingRow);\n            }\n\n            if (!allowDrag) {\n                rowClasses.push(styles.termRowDragDisabled);\n            }\n\n            rows.push(\n                <TableRow\n                    key={term.uuid}\n                    className={rowClasses.join(' ')}\n                    draggable={allowDrag}\n                    onDragStart={event => handleTermDragStart(event, index)}\n                    onDragOver={event => handleTermDragOver(event, index)}\n                    onDragEnd={handleTermDragEnd}\n                >\n                    <TableBodyCell>{term.value}</TableBodyCell>\n                    <TableBodyCell>{term.label}</TableBodyCell>\n                    <TableBodyCell className={styles.descriptionCell}>\n                        <div className={styles.descriptionContent}>{term.description}</div>\n                    </TableBodyCell>\n                    <TableBodyCell>\n                        <div className={styles.termActions}>\n                            <Button\n                                size=\"small\"\n                                label={t('actions.edit')}\n                                onClick={() => handleEditTerm(term)}\n                            />\n                            <Button\n                                size=\"small\"\n                                color=\"danger\"\n                                label={t('actions.delete')}\n                                onClick={() => handleDeleteTerm(term)}\n                            />\n                        </div>\n                    </TableBodyCell>\n                </TableRow>\n            );\n        });\n\n        if (placeholderIndex !== null && placeholderIndex === selectedList.terms.length) {\n            rows.push(renderPlaceholder('after-last'));\n        }\n\n        if (allowDrag) {\n            rows.push(\n                <TableRow\n                    key=\"drop-zone\"\n                    className={styles.dropZoneRow}\n                    onDragOver={event => {\n                        if (dragState.sourceIndex === null) {\n                            return;\n                        }\n\n                        event.preventDefault();\n                        updateTargetIndex(selectedList.terms.length);\n                    }}\n                >\n                    <TableBodyCell colSpan={4}/>\n                </TableRow>\n            );\n        }\n\n        return rows;\n    };\n\n    const renderLanguageTabs = () => {\n        if (!siteLanguages.length) {\n            return null;\n        }\n\n        return (\n            <div className={styles.languageTabs}>\n                {siteLanguages.map(lang => (\n                    <button\n                        key={lang.code}\n                        type=\"button\"\n                        className={`${styles.languageTab} ${lang.code === language ? styles.languageTabActive : ''}`}\n                        onClick={() => handleLanguageChange(lang.code)}\n                    >\n                        <span className={styles.languageFlag}>{getFlagEmoji(lang.code)}</span>\n                        <span>{lang.displayName || lang.code}</span>\n                    </button>\n                ))}\n            </div>\n        );\n    };\n\n    const renderListForm = () => (\n        <Paper className={styles.card}>\n            <Typography variant=\"heading\">\n                {showCreateList ? t('lists.createTitle') : t('lists.editTitle')}\n            </Typography>\n            <form onSubmit={handleSaveList}>\n                <div className={styles.formGroup}>\n                    <Typography variant=\"body\" weight=\"bold\">{t('lists.fields.systemName')}</Typography>\n                    <Input value={listForm.systemName} onChange={e => handleListChange('systemName', e.target.value)}/>\n                    <Typography variant=\"caption\">{t('lists.help.systemName')}</Typography>\n                </div>\n                <div className={styles.formGroup}>\n                    <Typography variant=\"body\" weight=\"bold\">{t('lists.fields.title')}</Typography>\n                    <Input value={listForm.title} onChange={e => handleListChange('title', e.target.value)}/>\n                </div>\n                <div className={styles.formGroup}>\n                    <Typography variant=\"body\" weight=\"bold\">{t('lists.fields.description')}</Typography>\n                    <textarea\n                        className={styles.textarea}\n                        value={listForm.description}\n                        onChange={e => handleListChange('description', e.target.value)}\n                    />\n                </div>\n                <div style={{display: 'flex', gap: '12px'}}>\n                    <Button type=\"submit\" size=\"big\" disabled={savingList} label={t('actions.save')}/>\n                    {!showCreateList && (\n                        <Button\n                            type=\"button\"\n                            size=\"big\"\n                            color=\"danger\"\n                            label={t('actions.delete')}\n                            onClick={() => handleDeleteList(selectedList)}\n                        />\n                    )}\n                </div>\n            </form>\n        </Paper>\n    );\n\n    const renderTermsSection = () => {\n        if (!selectedList || showCreateList) {\n            return null;\n        }\n\n        return (\n            <Paper className={styles.card}>\n                <div className={styles.cardHeader}>\n                    <Typography variant=\"heading\">{t('terms.title')}</Typography>\n                    <Button\n                        size=\"big\"\n                        color=\"accent\"\n                        isDisabled={importingTerms}\n                        label={t('actions.importTerms')}\n                        onClick={() => setImportDialogOpen(true)}\n                    />\n                </div>\n                <div style={{overflowX: 'auto', marginTop: '12px'}}>\n                    <Table className={styles.termsTable}>\n                        <TableHead>\n                            <TableRow>\n                                <TableHeadCell>{t('terms.fields.value')}</TableHeadCell>\n                                <TableHeadCell>{t('terms.fields.label')}</TableHeadCell>\n                                <TableHeadCell>{t('terms.fields.description')}</TableHeadCell>\n                                <TableHeadCell>{t('actions.actionsColumn')}</TableHeadCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody onDrop={handleTermDrop}>\n                            {renderTermRows()}\n                        </TableBody>\n                    </Table>\n                </div>\n                <form style={{marginTop: '16px', display: 'flex', flexDirection: 'column', gap: '12px'}} onSubmit={handleSaveTerm}>\n                    <Typography variant=\"subheading\">{termForm.uuid ? t('terms.editTitle') : t('terms.addTitle')}</Typography>\n                    <div className={styles.formGroup}>\n                        <Typography variant=\"body\" weight=\"bold\">{t('terms.fields.value')}</Typography>\n                        <Input value={termForm.value} onChange={e => handleTermChange('value', e.target.value)}/>\n                    </div>\n                    <div className={styles.formGroup}>\n                        <Typography variant=\"body\" weight=\"bold\">{t('terms.fields.label')}</Typography>\n                        <Input value={termForm.label} onChange={e => handleTermChange('label', e.target.value)}/>\n                    </div>\n                    <div className={styles.formGroup}>\n                        <Typography variant=\"body\" weight=\"bold\">{t('terms.fields.description')}</Typography>\n                        <textarea\n                            className={styles.textarea}\n                            value={termForm.description}\n                            onChange={e => handleTermChange('description', e.target.value)}\n                        />\n                    </div>\n                    <div style={{display: 'flex', gap: '12px'}}>\n                        <Button type=\"submit\" size=\"big\" disabled={savingTerm} label={t('actions.save')}/>\n                        <Button\n                            type=\"button\"\n                            size=\"big\"\n                            label={t('actions.cancel')}\n                            onClick={() => setTermForm({...defaultTermForm})}\n                        />\n                    </div>\n                </form>\n            </Paper>\n        );\n    };\n\n    const renderSidebar = () => (\n        <div className={styles.listPanel}>\n            <Typography variant=\"heading\">{t('lists.title')}</Typography>\n            <div className={styles.listsContainer}>\n                {lists.length === 0 && !loading && (\n                    <Typography variant=\"body\">{t('lists.empty')}</Typography>\n                )}\n                {lists.map(list => (\n                    <button\n                        key={list.uuid}\n                        type=\"button\"\n                        className={`${styles.listButton} ${list.uuid === selectedListId && !showCreateList ? styles.listButtonActive : ''}`}\n                        onClick={() => {\n                            setSelectedListId(list.uuid);\n                            setShowCreateList(false);\n                        }}\n                    >\n                        <span>{list.title}</span>\n                    </button>\n                ))}\n            </div>\n            <Button size=\"big\" label={t('actions.reload')} onClick={() => refreshLists(rootPath)}/>\n        </div>\n    );\n\n    const activeLanguage = siteLanguages.find(lang => lang.code === language);\n\n    return (\n        <>\n            <LayoutContent\n                header={(\n                    <Header\n                        title={`${t('pageTitle')}${siteName ? ` - ${siteName}` : ''}`}\n                        subtitle={t('pageSubtitle')}\n                        mainActions={[\n                            <Button\n                                key=\"create-list\"\n                                color=\"accent\"\n                                size=\"big\"\n                                label={t('actions.createList')}\n                                onClick={beginCreateList}\n                            />\n                        ]}\n                    />\n                )}\n                content={(\n                    <div className={styles.layout}>\n                        {feedback && (\n                            <div className={`${styles.feedback} ${feedback.type === 'error' ? styles.feedbackError : styles.feedbackSuccess}`}>\n                                {feedback.message}\n                            </div>\n                        )}\n                        {error && (\n                            <div className={`${styles.feedback} ${styles.feedbackError}`}>\n                                {error.message}\n                            </div>\n                        )}\n                        <div className={styles.container}>\n                            {renderSidebar()}\n                            <div className={styles.contentPanel}>\n                                {loading && (\n                                    <Typography variant=\"body\">{t('states.loading')}</Typography>\n                                )}\n                                {!loading && (lists.length > 0 || showCreateList) && (\n                                    <>\n                                        {renderLanguageTabs()}\n                                        {renderListForm()}\n                                        {renderTermsSection()}\n                                    </>\n                                )}\n                                {!loading && lists.length === 0 && !showCreateList && (\n                                    <Paper className={styles.card}>\n                                        <Typography variant=\"body\">{t('lists.empty')}</Typography>\n                                    </Paper>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                )}\n            />\n            <TermImportDialog\n                isOpen={isImportDialogOpen}\n                t={t}\n                siteLanguages={siteLanguages}\n                initialLanguage={language}\n                onClose={() => setImportDialogOpen(false)}\n                onImport={handleImportEntries}\n            />\n            <TermEditDialog\n                isOpen={isEditDialogOpen}\n                form={editTermForm}\n                isSaving={savingTerm}\n                t={t}\n                languageCode={language}\n                languageName={activeLanguage?.displayName}\n                onChange={handleEditFieldChange}\n                onClose={() => setEditDialogOpen(false)}\n                onSave={handleEditDialogSave}\n            />\n        </>\n    );\n};\n","import {registry} from '@jahia/ui-extender';\nimport constants from './AdminPanel.constants';\nimport {AdminPanel} from './AdminPanel';\nimport React, {Suspense} from 'react';\nimport PropTypes from 'prop-types';\n\nconst ListIcon = ({width = 12, height = 12}) => (\n    <svg\n        width={width}\n        height={height}\n        viewBox=\"0 0 24 24\"\n        fill=\"currentColor\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <path d=\"M4.5 6.5l1.8 1.8 3.2-3.3 1.1 1.1-4.3 4.4-2.9-2.9 1.1-1.1z\"/>\n        <rect x=\"12\" y=\"6\" width=\"8\" height=\"2\" rx=\"1\"/>\n\n        <path d=\"M4.5 12.5l1.8 1.8 3.2-3.3 1.1 1.1-4.3 4.4-2.9-2.9 1.1-1.1z\"/>\n        <rect x=\"12\" y=\"12\" width=\"8\" height=\"2\" rx=\"1\"/>\n\n        <path d=\"M4.5 18.5l1.8 1.8 3.2-3.3 1.1 1.1-4.3 4.4-2.9-2.9 1.1-1.1z\"/>\n        <rect x=\"12\" y=\"18\" width=\"8\" height=\"2\" rx=\"1\"/>\n    </svg>\n);\n\nconst TaxoIcon = ({width = 12, height = 12}) => (\n    <svg\n        width={width}\n        height={height}\n        viewBox=\"0 0 24 24\"\n        fill=\"currentColor\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <path d=\"M10 3h4v4h-4V3zM4 13h4v4H4v-4zm12 0h4v4h-4v-4zM12 7v3h-6v3m6-6v3h6v3\"/>\n    </svg>\n);\n\nexport const registerRoutes = () => {\n    window.jahia.i18n.loadNamespaces('controlled-lists');\n\n    registry.add('accordionItem', 'taxonomyAccordion', registry.get('accordionItem', 'renderDefaultApps'), {\n        targets: ['jcontent:75'],\n        icon: <TaxoIcon width={24} height={24}/>,\n        label: 'controlled-lists:accordionTitle',\n        appsTarget: 'taxonomyAccordionApps'\n    });\n\n    registry.add('adminRoute', 'controlled-lists', {\n        targets: ['taxonomyAccordionApps'],\n        icon: <ListIcon/>,\n        label: 'controlled-lists:label',\n        path: `${constants.DEFAULT_ROUTE}*`,\n        defaultPath: constants.DEFAULT_ROUTE,\n        isSelectable: true,\n        render: v => <Suspense fallback=\"loading ...\"><AdminPanel match={v.match}/></Suspense>\n    });\n};\n\nListIcon.propTypes = {\n    width: PropTypes.number,\n    height: PropTypes.number\n};\n\nTaxoIcon.propTypes = {\n    width: PropTypes.number,\n    height: PropTypes.number\n};\n","import React, {useEffect, useMemo, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {Typography, Dropdown, CheckboxItem, Chip, Button, Loader, Paper} from '@jahia/moonstone';\nimport axios from 'axios';\nimport styles from '../AdminPanel/AdminPanel.module.scss';\nimport {getFlagEmoji} from '../AdminPanel/flags';\nimport {CONTROLLED_LISTS_SELECTOR_QUERY} from '../graphql/controlledLists.queries';\n\nconst parseValue = value => {\n    if (!value) {\n        return {listId: null, terms: []};\n    }\n\n    try {\n        const parsed = JSON.parse(value);\n        return {\n            listId: parsed.listId || null,\n            terms: Array.isArray(parsed.terms) ? parsed.terms : []\n        };\n    } catch (_) {\n        return {listId: null, terms: []};\n    }\n};\n\nexport const ControlledListsSelector = ({value, onChange, language}) => {\n    const context = window.contextJsParameters || {};\n    const siteKey = context.siteKey || context.site?.key || '';\n    const editorLanguage = language || context.lang || context.language || context.uilang || 'en';\n    const [rootPath] = useState(siteKey ? `/sites/${siteKey}/contents/controlled-lists` : null);\n    const [lists, setLists] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n\n    const state = useMemo(() => parseValue(value), [value]);\n    const selectedList = lists.find(list => list.uuid === state.listId) || null;\n    const selectedTermIds = useMemo(() => new Set(state.terms.map(term => term.uuid)), [state.terms]);\n\n    useEffect(() => {\n        if (!rootPath) {\n            return;\n        }\n\n        const fetchLists = async () => {\n            setLoading(true);\n            setError(null);\n            try {\n                const response = await axios.post(\n                    `${context.contextPath || ''}/modules/graphql`,\n                    {query: CONTROLLED_LISTS_SELECTOR_QUERY, variables: {rootPath, language: editorLanguage}},\n                    {headers: {'Content-Type': 'application/json'}, withCredentials: true}\n                );\n\n                if (response.data?.errors?.length) {\n                    throw new Error(response.data.errors.map(err => err.message).join('\\n'));\n                }\n\n                const nodes = response.data?.data?.jcr?.nodeByPath?.children?.nodes || [];\n                const mapped = nodes.map(node => ({\n                    uuid: node.uuid,\n                    name: node.name,\n                    label: node.title?.value || node.name,\n                    terms: (node.children?.nodes || []).map(term => ({\n                        uuid: term.uuid,\n                        value: term.termValue?.value || '',\n                        label: term.termLabel?.value || term.termValue?.value || '',\n                        description: term.termDescription?.value || ''\n                    }))\n                }));\n                mapped.sort((a, b) => a.label.localeCompare(b.label));\n                setLists(mapped);\n            } catch (err) {\n                setError(err);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchLists();\n    }, [context.contextPath, editorLanguage, rootPath, siteKey]);\n\n    const handleListChange = (e, item) => {\n        const nextListId = item.value;\n        if (!nextListId) {\n            onChange('');\n            return;\n        }\n\n        onChange(JSON.stringify({listId: nextListId, terms: []}));\n    };\n\n    const handleTermToggle = term => {\n        const exists = selectedTermIds.has(term.uuid);\n        let nextTerms;\n        if (exists) {\n            nextTerms = state.terms.filter(t => t.uuid !== term.uuid);\n        } else {\n            nextTerms = [...state.terms, term];\n        }\n\n        onChange(JSON.stringify({listId: selectedList?.uuid || null, terms: nextTerms}));\n    };\n\n    if (!rootPath) {\n        return (\n            <Typography variant=\"body\">\n                {context.siteKey ? 'Missing lists root.' : 'Please select a site.'}\n            </Typography>\n        );\n    }\n\n    if (loading) {\n        return (\n            <div className={styles.selectorLoading}>\n                <Loader size=\"big\"/>\n                <Typography variant=\"body\">Loading controlled lists...</Typography>\n            </div>\n        );\n    }\n\n    if (error) {\n        return (\n            <Typography variant=\"body\" color=\"danger\">\n                {error.message}\n            </Typography>\n        );\n    }\n\n    const listOptions = lists.map(list => ({\n        label: list.label,\n        value: list.uuid\n    }));\n\n    return (\n        <Paper className={styles.selectorCard}>\n            <div className={styles.selectorContainer}>\n                <div className={styles.formGroup}>\n                    <Typography variant=\"body\" weight=\"bold\">Controlled list</Typography>\n                    <Dropdown\n                        data={listOptions}\n                        value={selectedList?.uuid || null}\n                        placeholder=\"Select a controlled list\"\n                        onChange={handleListChange}\n                    />\n                </div>\n\n                {selectedList && (\n                    <div className={styles.selectorTerms}>\n                        <Typography variant=\"body\" weight=\"bold\">\n                            Terms {editorLanguage && `(${getFlagEmoji(editorLanguage)} ${editorLanguage.toUpperCase()})`}\n                        </Typography>\n                        <div className={styles.selectorTermsList}>\n                            {selectedList.terms.map(term => (\n                                <CheckboxItem\n                                    key={term.uuid}\n                                    label={term.label}\n                                    description={term.description || term.value}\n                                    checked={selectedTermIds.has(term.uuid)}\n                                    onChange={() => handleTermToggle(term)}\n                                />\n                            ))}\n                        </div>\n                        {state.terms.length > 0 && (\n                            <div className={styles.selectorSelection}>\n                                <Typography variant=\"body\" weight=\"bold\">Selected</Typography>\n                                <div className={styles.selectorChips}>\n                                    {state.terms.map(term => (\n                                        <Chip key={term.uuid} label={term.label}/>\n                                    ))}\n                                </div>\n                                <Button\n                                    size=\"small\"\n                                    label=\"Clear selection\"\n                                    onClick={() => onChange(JSON.stringify({listId: selectedList.uuid, terms: []}))}\n                                />\n                            </div>\n                        )}\n                    </div>\n                )}\n            </div>\n        </Paper>\n    );\n};\n\nControlledListsSelector.propTypes = {\n    value: PropTypes.string,\n    onChange: PropTypes.func.isRequired,\n    language: PropTypes.string\n};\n\nControlledListsSelector.defaultProps = {\n    value: '',\n    language: null\n};\n","import {registry} from '@jahia/ui-extender';\nimport {registerRoutes} from './AdminPanel/AdminPanel.routes';\nimport i18next from 'i18next';\nimport en from '../main/resources/javascript/locales/en.json';\nimport fr from '../main/resources/javascript/locales/fr.json';\nimport de from '../main/resources/javascript/locales/de.json';\nimport es from '../main/resources/javascript/locales/es.json';\nimport pt from '../main/resources/javascript/locales/pt.json';\nimport it from '../main/resources/javascript/locales/it.json';\nimport {ControlledListsSelector} from './ControlledListsSelector/ControlledListsSelector';\n\nconst registerResources = () => {\n    const bundles = [\n        ['en', en],\n        ['fr', fr],\n        ['de', de],\n        ['es', es],\n        ['pt', pt],\n        ['it', it]\n    ];\n\n    bundles.forEach(([lang, resource]) => {\n        const namespaceData = resource['controlled-lists'];\n        if (namespaceData && !i18next.hasResourceBundle(lang, 'controlled-lists')) {\n            i18next.addResourceBundle(lang, 'controlled-lists', namespaceData, true, true);\n        }\n    });\n};\n\nexport default async function () {\n    registerResources();\n    await i18next.loadNamespaces('controlled-lists');\n\n    registry.add('selectorType', 'controlledListsSelector', {\n        cmp: ControlledListsSelector,\n        supportMultiple: false\n    });\n    registerRoutes();\n}\n","import {registry} from '@jahia/ui-extender';\nimport register from './AdminPanel.register';\n\nexport default function () {\n    registry.add('callback', 'controlled-lists', {\n        targets: ['jahiaApp-init:2'],\n        callback: register\n    });\n}\n"],"names":["api","content","__esModule","default","module","id","options","exports","locals","___CSS_LOADER_API_IMPORT___","push","DELETE_NODE_MUTATION","CREATE_TERM_MUTATION","UPDATE_TERM_MUTATION","normalizeEntries","data","map","item","value","trim","label","description","filter","entry","pickDefaultLanguage","languages","preferred","_languages$","some","lang","code","TermImportDialog","_ref","isOpen","siteLanguages","initialLanguage","onClose","onImport","t","_useState","useState","_useState2","_slicedToArray","entries","setEntries","_useState3","_useState4","fileName","setFileName","_useState5","_useState6","error","setError","_useState7","_useState8","parsing","setParsing","_useState9","_useState0","selectedLanguage","setSelectedLanguage","_useState1","_useState10","overrideExisting","setOverrideExisting","fileInputRef","useRef","languageOptions","useMemo","displayName","resetState","useCallback","useEffect","prev","ReactDOM","React","className","styles","Typography","variant","Button","size","onClick","_fileInputRef$current","current","click","ref","type","accept","onChange","event","file","target","files","name","toLowerCase","split","pop","reader","FileReader","onload","loadEvent","jsonData","JSON","parse","result","normalized","Array","isArray","length","Error","err","message","onerror","readAsText","Papa","header","skipEmptyLines","complete","_result$errors","errors","concat","Boolean","count","slice","key","weight","Dropdown","placeholder","e","Checkbox","checked","color","isDisabled","language","document","body","propTypes","PropTypes","isRequired","defaultProps","FLAG_MAP","en","fr","de","es","it","pt","nl","ru","ja","zh","ar","ko","pl","tr","sv","da","no","fi","cs","el","getFlagEmoji","langCode","TermEditDialog","form","onSave","isSaving","languageCode","languageName","toUpperCase","Input","defaultListForm","uuid","path","systemName","title","defaultTermForm","ensureUniqueName","existingNames","fallbackPrefix","base","toString","normalize","replace","slugify","includes","suffix","askConfirmation","window","confirm","reorderTermCollection","terms","sourceIndex","targetIndex","clampedTarget","Math","max","min","nextOrder","_toConsumableArray","_nextOrder$splice","splice","moved","insertIndex","every","term","idx","mapListNode","node","_node$title","_node$description","_node$children","children","nodes","_term$termValue","_term$termLabel","_term$termDescription","termValue","termLabel","termDescription","normalizeLanguages","langs","seen","Set","forEach","has","add","AdminPanel","_context$site","_context$site2","_context$site3","_useTranslation","useTranslation","uiLanguage","i18n","context","contextJsParameters","siteKey","site","siteName","setLanguage","graphqlEndpoint","contextPath","initialSiteLanguages","setSiteLanguages","rootPath","setRootPath","lists","setLists","selectedListId","setSelectedListId","showCreateList","setShowCreateList","_useState11","_useState12","listForm","setListForm","_useState13","_useState14","termForm","setTermForm","_useState15","_useState16","loading","setLoading","_useState17","_useState18","savingList","setSavingList","_useState19","_useState20","savingTerm","setSavingTerm","_useState21","_useState22","feedback","setFeedback","_useState23","_useState24","_useState25","_useState26","isImportDialogOpen","setImportDialogOpen","_useState27","_useState28","importingTerms","setImportingTerms","_useState29","_useState30","isEditDialogOpen","setEditDialogOpen","_useState31","_useState32","editTermForm","setEditTermForm","_useState33","_useState34","reorderingTerms","setReorderingTerms","_useState35","_useState36","dragState","setDragState","executeQuery","_asyncToGenerator","_regeneratorRuntime","_callee","query","variables","_response$data","response","_context","next","axios","headers","withCredentials","sent","join","abrupt","stop","_x","_x2","apply","arguments","selectedList","find","list","resetDragState","refreshLists","timer","setTimeout","clearTimeout","ensureRoot","_callee2","_data$jcr","baseContentPath","targetPath","_context2","jcr","nodeByPath","parentPath","_ref3","_callee3","nextSelection","_data$jcr2","mapped","_mapped$","_t","_context3","sort","a","b","localeCompare","sensitivity","finish","_x3","_x4","active","bootstrap","_ref4","_callee4","_t2","_context4","mounted","fetchLanguages","_ref5","_callee5","_data$jcr$nodeByPath$","_data$jcr3","_t3","_context5","sitePath","activeInEdit","console","warn","_objectSpread","handleListChange","field","_defineProperty","handleTermChange","notify","params","handleSaveList","_ref6","_callee6","properties","_data$jcr4","newUuid","_t4","_context6","preventDefault","addNode","_x5","handleDeleteList","_ref7","_callee7","_t5","_context7","_x6","handleSaveTerm","_ref8","_callee8","termName","_t6","_context8","_x7","handleEditDialogSave","_ref9","_callee9","_t7","_context9","handleDeleteTerm","_ref0","_callee0","_t8","_context0","_x8","handleImportEntries","_ref1","_callee1","importedEntries","usedNames","existingByValue","createPayloads","updatePayloads","importLanguage","createResults","updateResults","created","updated","rejected","_t9","_args1","_context1","undefined","Map","_entry$value","_entry$label","_entry$description","valueKey","existingTerm","get","uniqueName","from","set","Promise","allSettled","payload","status","reason","_x9","updateTargetIndex","index","limit","clamped","handleTermDrop","_ref10","_callee10","_t0","_context10","stopPropagation","names","_x0","handleTermDragEnd","activeLanguage","LayoutContent","Header","subtitle","mainActions","Paper","onSubmit","style","display","gap","disabled","overflowX","marginTop","Table","TableHead","TableRow","TableHeadCell","TableBody","onDrop","TableBodyCell","colSpan","allowDrag","isSelfTarget","placeholderIndex","renderPlaceholder","rows","rowClasses","draggable","onDragStart","dataTransfer","effectAllowed","setData","handleTermDragStart","onDragOver","rect","currentTarget","getBoundingClientRect","shouldPlaceAfter","clientY","top","height","handleTermDragOver","onDragEnd","handleEditTerm","renderTermRows","flexDirection","ListIcon","_ref$width","width","_ref$height","viewBox","fill","xmlns","d","x","y","rx","TaxoIcon","_ref2","_ref2$width","_ref2$height","registerRoutes","jahia","loadNamespaces","registry","targets","icon","appsTarget","constants","defaultPath","isSelectable","render","v","Suspense","fallback","match","ControlledListsSelector","editorLanguage","uilang","state","listId","parsed","_","parseValue","selectedTermIds","fetchLists","_response$data2","_term$termValue2","Loader","listOptions","nextListId","stringify","CheckboxItem","nextTerms","handleTermToggle","Chip","registerResources","namespaceData","i18next","cmp","supportMultiple","callback","register"],"ignoreList":[],"sourceRoot":""}